"use strict";(globalThis["webpackChunkshell_org"]=globalThis["webpackChunkshell_org"]||[]).push([[912],{11912:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(59835),l=a(86970);const s={class:"row items-start q-gutter-xs justify-evenly q-pa-none",style:{width:"100%","max-width":"800px","min-width":"300px"}},o={class:"full-width q-py-md q-px-none"},i={class:"column"},u={class:"q-pt-md"},r=["src"],d={class:"column"},c={class:"column"},m=(0,n.Uk)(" transfer "),p={class:"column"},f={class:"column"},y=(0,n.Uk)(" Set "),w={class:"column"},b={class:"column"},v=(0,n.Uk)(" Set ");function g(e,t,a,g,h,k){const x=(0,n.up)("q-icon"),_=(0,n.up)("q-item-label"),T=(0,n.up)("q-item-section"),C=(0,n.up)("q-item"),W=(0,n.up)("q-list"),B=(0,n.up)("q-menu"),H=(0,n.up)("q-btn"),q=(0,n.up)("q-avatar"),V=(0,n.up)("q-input"),A=(0,n.up)("q-page"),U=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(A,{class:"row items-start justify-evenly"},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"number",modelValue:g.transferAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>g.transferAmount=e),modelModifiers:{number:!0},debounce:"200",label:"Balance: "+g.tokenBalance,"stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.Wm)(H,{dense:"",flat:"",color:"white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(g.vaults[g.currentVault].name)+" ",1),(0,n.Wm)(x,{class:"q-pl-sm",name:"las la-angle-down",size:"12px",color:"grey"}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.vaults,(e=>((0,n.wg)(),(0,n.j4)(W,{key:e.name,style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(C,{clickable:"",class:"q-pl-xs",onClick:t=>{g.currentVault=g.vaults.indexOf(e),g.getBalance()}},{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[U]])])),_:2},1024)))),128))])),_:1})])),_:1}),(0,n.Wm)(H,{dense:"",flat:"",color:"white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(g.store.selectedToken.toUpperCase())+" ",1),(0,n.Wm)(x,{class:"q-pl-sm",name:"img:tokens/"+g.store.selectedToken.toLocaleLowerCase()+".png"},null,8,["name"]),(0,n.Wm)(x,{class:"q-pl-sm",name:"las la-angle-down",size:"12px",color:"grey"}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.tokenList,(e=>((0,n.wg)(),(0,n.j4)(W,{key:e,style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(C,{clickable:"",class:"q-pl-xs",onClick:t=>{g.store.selectedToken=e,g.getBalance()}},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(q,{size:"md"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:"tokens/"+e+".png"},null,8,r)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[U]])])),_:2},1024)))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue","label"])])),_:1})])),_:1})]),(0,n._)("div",d,[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"text",modelValue:g.transferTo,"onUpdate:modelValue":t[1]||(t[1]=e=>g.transferTo=e),modelModifiers:{string:!0},debounce:"200",label:"Address:","stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,n.w5)((()=>[(0,n.Wm)(H,{flat:"",onClick:g.pasteAddr},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{name:"las la-paste"})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,n._)("div",c,[(0,n.Wm)(H,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[2]||(t[2]=e=>g.transfer())},{default:(0,n.w5)((()=>[m])),_:1})]),(0,n._)("div",p,[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"number",modelValue:g.gameFraction,"onUpdate:modelValue":t[3]||(t[3]=e=>g.gameFraction=e),modelModifiers:{string:!0},debounce:"200",label:"Game Fraction: 1/"+g.gameFraction,"stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,n.w5)((()=>[(0,n.Wm)(H,{flat:"",onClick:e=>null},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{name:"las la-dice"})])),_:1})])),_:1},8,["modelValue","label"])])),_:1})])),_:1})]),(0,n._)("div",f,[(0,n.Wm)(H,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[4]||(t[4]=e=>g.setFraction())},{default:(0,n.w5)((()=>[y])),_:1})]),(0,n._)("div",w,[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,{class:"row"},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"number",modelValue:g.setId,"onUpdate:modelValue":t[5]||(t[5]=e=>g.setId=e),modelModifiers:{string:!0},debounce:"200",label:"Set player ID:"+g.setId,"stack-label":"",class:"text-h6 text-mono"},null,8,["modelValue","label"]),(0,n.Wm)(V,{filled:"",type:"number",modelValue:g.setLevel,"onUpdate:modelValue":t[6]||(t[6]=e=>g.setLevel=e),modelModifiers:{string:!0},debounce:"200",label:"Level:"+g.setLevel,"stack-label":"",class:"text-h6 text-mono"},null,8,["modelValue","label"])])),_:1})])),_:1})]),(0,n._)("div",b,[(0,n.Wm)(H,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[7]||(t[7]=e=>g.setPlayer())},{default:(0,n.w5)((()=>[v])),_:1})])])])])),_:1})}var h=a(60499),k=a(18401),x=a(19302),_=a(29941),T=a(17779),C=function(e,t,a,n){function l(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function i(e){try{u(n["throw"](e))}catch(t){s(t)}}function u(e){e.done?a(e.value):l(e.value).then(o,i)}u((n=n.apply(e,t||[])).next())}))};const W=a(67489),B=a(66472),H=a(16518),q=a(42379),V=a(25098),A="0x3CB724609eb0D7f4C4a3BaE8ae9C9afEA2471E9E",U={title:"Backend"},M={name:"BackendPage",meta:U,components:{},setup(){const e=(0,x.Z)();e.dark.set(!0),(0,k.Z)(U);const t=(0,_.v)(),a=t.web3;var l=(0,h.iH)(0),s=(0,h.iH)(),o=(0,h.iH)("0xcFbBcAC2CA63A42cE7eB2dCA3f7Ce785f7c184e5"),i=(0,h.iH)("0"),u=(0,h.iH)(1),r=(0,h.iH)(0),d=(0,h.iH)(0),c=(0,h.iH)(!1),m=[{name:"RUG",address:"0x3e9e07701d8e7f305d0b99f33f3302a0106ed6c7",game:"0x59509BCcb22617F65A35cb0dd98c16bcEd676172",abi:q},{name:"DICE",address:"0xd9777c70820ec8deb49b71bb374ff49b9a455a4b",game:"0xfc5C8cF76503174639aAe3dDDd579DcC5b2B26E2",abi:H}],p=(0,n.Fl)((()=>{var e=[];for(let a=0;a<t.token.length;a++)e.push(t.token[a].symbol);return e})),f=(0,n.Fl)((()=>{var e=t.selectedToken.toUpperCase();return parseFloat(i.value).toFixed(2)+" "+e}));function y(){return C(this,void 0,void 0,(function*(){T.log("updateVault"),w()}))}function w(){return C(this,void 0,void 0,(function*(){const e=t.selectedToken.toUpperCase();if("TT"==e){const e=yield a.eth.getBalance(m[l.value].address),t=a.utils.fromWei(e,"ether");i.value=t,T.log("ETH Balance of",m[l.value].name," is: ",t)}else{const n="BUSD"==e?1:0,s=t.token[n].contract,o=new a.eth.Contract(W,s),u=yield o.methods.balanceOf(m[l.value].address).call(),r=a.utils.fromWei(u,"ether");i.value=r,T.log(e,"Balance of",m[l.value].name,"is: ",r)}T.log("Balance:",f.value)}))}function b(){return C(this,void 0,void 0,(function*(){const e=t.web3,n="SHELL"==t.selectedToken.toUpperCase()?0:"BUSD"==t.selectedToken.toUpperCase()?1:2,i=a.utils.toWei(s.value.toString(),"ether"),u=m[l.value].address,r=t.token[n].contract,d=new a.eth.Contract(B,u);T.log("Transfer",s,"to",o.value);let c=d.methods.transfer(r,o.value,i),p=c.encodeABI();e.eth.sendTransaction({from:t.account,to:m[l.value].address,value:0,gas:333333,gasPrice:t.gasPrice,data:p}).on("transactionHash",(e=>{T.log("transactionHash: ",e)})).on("receipt",(e=>{T.log("receipt: ",e),w()})).on("error",(e=>{T.log("tx transfer",e)}))}))}function v(){return C(this,void 0,void 0,(function*(){const e=t.web3,n=m[l.value].game,s=new a.eth.Contract(m[l.value].abi,n);T.log("Set Fraction",u);let o=s.methods.setHouseFraction(u.value),i=o.encodeABI();e.eth.sendTransaction({from:t.account,to:m[l.value].game,value:0,gas:333333,gasPrice:t.gasPrice,data:i}).on("transactionHash",(e=>{T.log("transactionHash: ",e)})).on("receipt",(e=>{T.log("receipt: ",e),w()})).on("error",(e=>{T.log("tx transfer",e)}))}))}function g(){return C(this,void 0,void 0,(function*(){c.value=!0;const e=t.web3,n=A,l=new a.eth.Contract(V,n);T.log("Set Player");let s=e.utils.toHex(r.value),o=e.utils.toHex(d.value),i=e.utils.toHex(1),u=l.methods.setPlayer(s,i,o),m=u.encodeABI();e.eth.sendTransaction({from:t.account,to:A,value:0,gas:2e6,gasPrice:t.gasPrice,data:m}).on("transactionHash",(e=>{T.log("transactionHash: ",e)})).on("receipt",(e=>{T.log("receipt: ",e),w(),c.value=!1})).on("error",(e=>{T.log("tx transfer",e),c.value=!1}))}))}function M(){T.log("pasteAddr"),o.value="",navigator.clipboard.readText().then((e=>{o.value=e}))}return w(),{store:t,tokenList:p,tokenBalance:f,currentVault:l,currentBalance:i,transferAmount:s,transferTo:o,gameFraction:u,vaults:m,setId:r,setLevel:d,setting:c,transfer:b,setFraction:v,setPlayer:g,updateVault:y,getBalance:w,pasteAddr:M}}};var F=a(11639),I=a(69885),L=a(490),P=a(76749),Z=a(66611),E=a(24455),G=a(22857),Q=a(97858),S=a(13246),D=a(33115),O=a(61357),j=a(62146),z=a(69984),K=a.n(z);const R=(0,F.Z)(M,[["render",g]]),Y=R;K()(M,"components",{QPage:I.Z,QItem:L.Z,QItemSection:P.Z,QInput:Z.Z,QBtn:E.Z,QIcon:G.Z,QMenu:Q.Z,QList:S.Z,QItemLabel:D.Z,QAvatar:O.Z}),K()(M,"directives",{ClosePopup:j.Z})},66472:e=>{e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"newGame","type":"address"}],"name":"addGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newGame","type":"address"}],"name":"GameAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"removedGame","type":"address"}],"name":"GameRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"receiveETH","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"game","type":"address"}],"name":"removeGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"toggleGameIsLive","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"games","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"isGame","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}}]);