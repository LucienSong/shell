"use strict";(globalThis["webpackChunkshell_org"]=globalThis["webpackChunkshell_org"]||[]).push([[355],{90355:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(59835),l=n(86970);const s={class:"row items-start q-gutter-xs justify-evenly q-pa-none",style:{width:"100%","max-width":"800px","min-width":"300px"}},o={class:"full-width q-py-md q-px-none"},u={class:"column"},i={class:"q-pt-md"},r=["src"],d={class:"column"},p={class:"column"},c=(0,a.Uk)(" transfer ");function m(e,t,n,m,y,f){const w=(0,a.up)("q-icon"),v=(0,a.up)("q-item-label"),b=(0,a.up)("q-item-section"),g=(0,a.up)("q-item"),h=(0,a.up)("q-list"),k=(0,a.up)("q-menu"),T=(0,a.up)("q-btn"),_=(0,a.up)("q-avatar"),x=(0,a.up)("q-input"),C=(0,a.up)("q-page"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(C,{class:"row items-start justify-evenly"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",o,[(0,a._)("div",u,[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{filled:"",type:"number",modelValue:m.transferAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>m.transferAmount=e),modelModifiers:{number:!0},debounce:"200",label:"Balance: "+m.tokenBalance,"stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(T,{dense:"",flat:"",color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(m.vaults[m.currentVault].name)+" ",1),(0,a.Wm)(w,{class:"q-pl-sm",name:"las la-angle-down",size:"12px",color:"grey"}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.vaults,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.name,style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(g,{clickable:"",class:"q-pl-xs",onClick:t=>{m.currentVault=m.vaults.indexOf(e),m.getBalance()}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[W]])])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)(T,{dense:"",flat:"",color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(m.store.selectedToken.toUpperCase())+" ",1),(0,a.Wm)(w,{class:"q-pl-sm",name:"img:tokens/"+m.store.selectedToken.toLocaleLowerCase()+".png"},null,8,["name"]),(0,a.Wm)(w,{class:"q-pl-sm",name:"las la-angle-down",size:"12px",color:"grey"}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.tokenList,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e,style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(g,{clickable:"",class:"q-pl-xs",onClick:t=>{m.store.selectedToken=e,m.getBalance()}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{size:"md"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:"tokens/"+e+".png"},null,8,r)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[W]])])),_:2},1024)))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue","label"])])),_:1})])),_:1})]),(0,a._)("div",d,[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{filled:"",type:"text",modelValue:m.transferTo,"onUpdate:modelValue":t[1]||(t[1]=e=>m.transferTo=e),modelModifiers:{string:!0},debounce:"200",label:"Address:","stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,a.w5)((()=>[(0,a.Wm)(T,{flat:"",onClick:m.pasteAddr},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{name:"las la-paste"})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,a._)("div",p,[(0,a.Wm)(T,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[2]||(t[2]=e=>m.transfer())},{default:(0,a.w5)((()=>[c])),_:1})])])])])),_:1})}var y=n(60499),f=n(65457),w=n(19302),v=n(29941),b=n(17779),g=function(e,t,n,a){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{i(a.next(e))}catch(t){s(t)}}function u(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):l(e.value).then(o,u)}i((a=a.apply(e,t||[])).next())}))};const h=n(67489),k=n(66472),T={title:"Backend"},_={name:"BackendPage",meta:T,components:{},setup(){const e=(0,w.Z)();e.dark.set(!0),(0,f.Z)(T);const t=(0,v.v)(),n=t.web3;var l=(0,y.iH)(0),s=(0,y.iH)(),o=(0,y.iH)("0xcFbBcAC2CA63A42cE7eB2dCA3f7Ce785f7c184e5"),u=(0,y.iH)("0"),i=[{name:"RUG",address:"0x3e9e07701d8e7f305d0b99f33f3302a0106ed6c7"},{name:"DICE",address:"0xd9777c70820ec8deb49b71bb374ff49b9a455a4b"}],r=(0,a.Fl)((()=>{var e=[];for(let n=0;n<t.token.length;n++)e.push(t.token[n].symbol);return e})),d=(0,a.Fl)((()=>{var e=t.selectedToken.toUpperCase();return parseFloat(u.value).toFixed(2)+" "+e}));function p(){return g(this,void 0,void 0,(function*(){b.log("updateVault"),c()}))}function c(){return g(this,void 0,void 0,(function*(){const e=t.selectedToken.toUpperCase();if("TT"==e){const e=yield n.eth.getBalance(i[l.value].address),t=n.utils.fromWei(e,"ether");u.value=t,b.log("ETH Balance of",i[l.value].name," is: ",t)}else{const a="BUSD"==e?1:0,s=t.token[a].contract,o=new n.eth.Contract(h,s),r=yield o.methods.balanceOf(i[l.value].address).call(),d=n.utils.fromWei(r,"ether");u.value=d,b.log(e,"Balance of",i[l.value].name,"is: ",d)}b.log("Balance:",d.value)}))}function m(){return g(this,void 0,void 0,(function*(){const e=t.web3,a="SHELL"==t.selectedToken.toUpperCase()?0:"BUSD"==t.selectedToken.toUpperCase()?1:2,u=n.utils.toWei(s.value.toString(),"ether"),r=i[l.value].address,d=t.token[a].contract,p=new n.eth.Contract(k,r);b.log("Transfer",s,"to",o.value);let m=p.methods.transfer(d,o.value,u),y=m.encodeABI();e.eth.sendTransaction({from:t.account,to:i[l.value].address,value:0,gas:333333,gasPrice:t.gasPrice,data:y}).on("transactionHash",(e=>{b.log("transactionHash: ",e)})).on("receipt",(e=>{b.log("receipt: ",e),c()})).on("error",(e=>{b.log("tx transfer",e)}))}))}function _(){b.log("pasteAddr"),o.value="",navigator.clipboard.readText().then((e=>{o.value=e}))}return c(),{store:t,tokenList:r,tokenBalance:d,currentVault:l,currentBalance:u,transferAmount:s,transferTo:o,vaults:i,transfer:m,updateVault:p,getBalance:c,pasteAddr:_}}};var x=n(11639),C=n(69885),W=n(490),q=n(76749),B=n(66611),M=n(24455),A=n(22857),U=n(97858),Z=n(13246),H=n(33115),Q=n(61357),V=n(62146),G=n(69984),L=n.n(G);const O=(0,x.Z)(_,[["render",m]]),I=O;L()(_,"components",{QPage:C.Z,QItem:W.Z,QItemSection:q.Z,QInput:B.Z,QBtn:M.Z,QIcon:A.Z,QMenu:U.Z,QList:Z.Z,QItemLabel:H.Z,QAvatar:Q.Z}),L()(_,"directives",{ClosePopup:V.Z})},66472:e=>{e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"newGame","type":"address"}],"name":"addGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newGame","type":"address"}],"name":"GameAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"removedGame","type":"address"}],"name":"GameRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"receiveETH","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"game","type":"address"}],"name":"removeGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"toggleGameIsLive","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"games","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"isGame","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}}]);