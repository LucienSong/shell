"use strict";(globalThis["webpackChunkshell_org"]=globalThis["webpackChunkshell_org"]||[]).push([[963],{90963:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(59835),l=a(86970);const s={class:"row items-start q-gutter-xs justify-evenly q-pa-none",style:{width:"100%","max-width":"800px","min-width":"300px"}},o={class:"full-width q-py-md q-px-none"},i={class:"column"},u={class:"q-pt-md"},r=["src"],d={class:"column"},c={class:"column"},m=(0,n.Uk)(" transfer "),p={class:"column"},f={class:"column"},y=(0,n.Uk)(" Set "),w={class:"column"},v={class:"column"},b=(0,n.Uk)(" Set "),g={class:"row"};function h(e,t,a,h,k,x){const _=(0,n.up)("q-icon"),T=(0,n.up)("q-item-label"),C=(0,n.up)("q-item-section"),W=(0,n.up)("q-item"),B=(0,n.up)("q-list"),H=(0,n.up)("q-menu"),q=(0,n.up)("q-btn"),U=(0,n.up)("q-avatar"),V=(0,n.up)("q-input"),A=(0,n.up)("q-chip"),M=(0,n.up)("q-page"),F=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(M,{class:"row items-start justify-evenly"},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"number",modelValue:h.transferAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>h.transferAmount=e),modelModifiers:{number:!0},debounce:"200",label:"Balance: "+h.tokenBalance,"stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.Wm)(q,{dense:"",flat:"",color:"white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(h.vaults[h.currentVault].name)+" ",1),(0,n.Wm)(_,{class:"q-pl-sm",name:"las la-angle-down",size:"12px",color:"grey"}),(0,n.Wm)(H,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.vaults,(e=>((0,n.wg)(),(0,n.j4)(B,{key:e.name,style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(W,{clickable:"",class:"q-pl-xs",onClick:t=>{h.currentVault=h.vaults.indexOf(e),h.getBalance()}},{default:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[F]])])),_:2},1024)))),128))])),_:1})])),_:1}),(0,n.Wm)(q,{dense:"",flat:"",color:"white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(h.store.selectedToken.toUpperCase())+" ",1),(0,n.Wm)(_,{class:"q-pl-sm",name:"img:tokens/"+h.store.selectedToken.toLocaleLowerCase()+".png"},null,8,["name"]),(0,n.Wm)(_,{class:"q-pl-sm",name:"las la-angle-down",size:"12px",color:"grey"}),(0,n.Wm)(H,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.tokenList,(e=>((0,n.wg)(),(0,n.j4)(B,{key:e,style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(W,{clickable:"",class:"q-pl-xs",onClick:t=>{h.store.selectedToken=e,h.getBalance()}},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{size:"md"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:"tokens/"+e+".png"},null,8,r)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[F]])])),_:2},1024)))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue","label"])])),_:1})])),_:1})]),(0,n._)("div",d,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"text",modelValue:h.transferTo,"onUpdate:modelValue":t[1]||(t[1]=e=>h.transferTo=e),modelModifiers:{string:!0},debounce:"200",label:"Address:","stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,n.w5)((()=>[(0,n.Wm)(q,{flat:"",onClick:h.pasteAddr},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{name:"las la-paste"})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,n._)("div",c,[(0,n.Wm)(q,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[2]||(t[2]=e=>h.transfer())},{default:(0,n.w5)((()=>[m])),_:1})]),(0,n._)("div",p,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"number",modelValue:h.gameFraction,"onUpdate:modelValue":t[3]||(t[3]=e=>h.gameFraction=e),modelModifiers:{string:!0},debounce:"200",label:"Game Fraction: 1/"+h.gameFraction,"stack-label":"",class:"full-width text-h6 text-mono"},{append:(0,n.w5)((()=>[(0,n.Wm)(q,{flat:"",onClick:e=>null},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{name:"las la-dice"})])),_:1})])),_:1},8,["modelValue","label"])])),_:1})])),_:1})]),(0,n._)("div",f,[(0,n.Wm)(q,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[4]||(t[4]=e=>h.setFraction())},{default:(0,n.w5)((()=>[y])),_:1})]),(0,n._)("div",w,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{class:"row"},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{filled:"",type:"number",modelValue:h.setId,"onUpdate:modelValue":t[5]||(t[5]=e=>h.setId=e),modelModifiers:{string:!0},debounce:"200",label:"Set player ID:"+h.setId,"stack-label":"",class:"text-h6 text-mono"},null,8,["modelValue","label"]),(0,n.Wm)(V,{filled:"",type:"number",modelValue:h.setLevel,"onUpdate:modelValue":t[6]||(t[6]=e=>h.setLevel=e),modelModifiers:{string:!0},debounce:"200",label:"Level:"+h.setLevel,"stack-label":"",class:"text-h6 text-mono"},null,8,["modelValue","label"])])),_:1})])),_:1})]),(0,n._)("div",v,[(0,n.Wm)(q,{"no-caps":"",color:"primary",class:"full-width text-bold text-h6",onClick:t[7]||(t[7]=e=>h.setPlayer())},{default:(0,n.w5)((()=>[b])),_:1})]),(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.gameStatus,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t},[t>0?((0,n.wg)(),(0,n.j4)(A,{key:0},{default:(0,n.w5)((()=>[(0,n.Uk)(" #"+(0,l.zw)(t)+": "+(0,l.zw)(e),1)])),_:2},1024)):(0,n.kq)("",!0)])))),128))])])])])),_:1})}var k=a(60499),x=a(18401),_=a(19302),T=a(29941),C=a(17779),W=function(e,t,a,n){function l(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function i(e){try{u(n["throw"](e))}catch(t){s(t)}}function u(e){e.done?a(e.value):l(e.value).then(o,i)}u((n=n.apply(e,t||[])).next())}))};const B=a(67489),H=a(66472),q=a(16518),U=a(42379),V=a(25098),A="0x3CB724609eb0D7f4C4a3BaE8ae9C9afEA2471E9E",M={title:"Backend"},F={name:"BackendPage",meta:M,components:{},setup(){const e=(0,_.Z)();e.dark.set(!0),(0,x.Z)(M);const t=(0,T.v)(),a=t.web3;var l=(0,k.iH)([0]),s=(0,k.iH)(0),o=(0,k.iH)(),i=(0,k.iH)("0xcFbBcAC2CA63A42cE7eB2dCA3f7Ce785f7c184e5"),u=(0,k.iH)("0"),r=(0,k.iH)(1),d=(0,k.iH)(0),c=(0,k.iH)(0),m=(0,k.iH)(!1),p=[{name:"RUG",address:"0x3e9e07701d8e7f305d0b99f33f3302a0106ed6c7",game:"0x59509BCcb22617F65A35cb0dd98c16bcEd676172",abi:U},{name:"DICE",address:"0xd9777c70820ec8deb49b71bb374ff49b9a455a4b",game:"0xfc5C8cF76503174639aAe3dDDd579DcC5b2B26E2",abi:q}],f=(0,n.Fl)((()=>{var e=[];for(let a=0;a<t.token.length;a++)e.push(t.token[a].symbol);return e})),y=(0,n.Fl)((()=>{var e=t.selectedToken.toUpperCase();return parseFloat(u.value).toFixed(2)+" "+e}));function w(){return W(this,void 0,void 0,(function*(){C.log("updateVault"),b()}))}function v(){return W(this,void 0,void 0,(function*(){const e=t.web3,a=new e.eth.Contract(V,A),n=yield a.methods.totalPlayerCounts(21).call().catch((e=>{C.log("gameStatus error:",e)}));let s=[];for(let t=0;t<n.length;t++)s.push(n[t]);l.value=s,C.log("status:",l.value)}))}function b(){return W(this,void 0,void 0,(function*(){const e=t.selectedToken.toUpperCase();if("TT"==e){const e=yield a.eth.getBalance(p[s.value].address),t=a.utils.fromWei(e,"ether");u.value=t,C.log("ETH Balance of",p[s.value].name," is: ",t)}else{const n="BUSD"==e?1:0,l=t.token[n].contract,o=new a.eth.Contract(B,l),i=yield o.methods.balanceOf(p[s.value].address).call(),r=a.utils.fromWei(i,"ether");u.value=r,C.log(e,"Balance of",p[s.value].name,"is: ",r)}C.log("Balance:",y.value)}))}function g(){return W(this,void 0,void 0,(function*(){const e=t.web3,n="SHELL"==t.selectedToken.toUpperCase()?0:"BUSD"==t.selectedToken.toUpperCase()?1:2,l=a.utils.toWei(o.value.toString(),"ether"),u=p[s.value].address,r=t.token[n].contract,d=new a.eth.Contract(H,u);C.log("Transfer",o,"to",i.value);let c=d.methods.transfer(r,i.value,l),m=c.encodeABI();e.eth.sendTransaction({from:t.account,to:p[s.value].address,value:0,gas:333333,gasPrice:t.gasPrice,data:m}).on("transactionHash",(e=>{C.log("transactionHash: ",e)})).on("receipt",(e=>{C.log("receipt: ",e),b()})).on("error",(e=>{C.log("tx transfer",e)}))}))}function h(){return W(this,void 0,void 0,(function*(){const e=t.web3,n=p[s.value].game,l=new a.eth.Contract(p[s.value].abi,n);C.log("Set Fraction",r);let o=l.methods.setHouseFraction(r.value),i=o.encodeABI();e.eth.sendTransaction({from:t.account,to:p[s.value].game,value:0,gas:333333,gasPrice:t.gasPrice,data:i}).on("transactionHash",(e=>{C.log("transactionHash: ",e)})).on("receipt",(e=>{C.log("receipt: ",e),b()})).on("error",(e=>{C.log("tx transfer",e)}))}))}function F(){return W(this,void 0,void 0,(function*(){m.value=!0;const e=t.web3,n=A,l=new a.eth.Contract(V,n);C.log("Set Player");let s=e.utils.toHex(d.value),o=e.utils.toHex(c.value),i=e.utils.toHex(1),u=l.methods.setPlayer(s,i,o),r=u.encodeABI();e.eth.sendTransaction({from:t.account,to:A,value:0,gas:2e6,gasPrice:t.gasPrice,data:r}).on("transactionHash",(e=>{C.log("transactionHash: ",e)})).on("receipt",(e=>{C.log("receipt: ",e),b(),m.value=!1})).on("error",(e=>{C.log("tx transfer",e),m.value=!1}))}))}function I(){C.log("pasteAddr"),i.value="",navigator.clipboard.readText().then((e=>{i.value=e}))}return b(),v(),{store:t,tokenList:f,tokenBalance:y,currentVault:s,currentBalance:u,transferAmount:o,transferTo:i,gameFraction:r,vaults:p,setId:d,setLevel:c,setting:m,gameStatus:l,transfer:g,setFraction:h,setPlayer:F,updateVault:w,getBalance:b,getGameStatus:v,pasteAddr:I}}};var I=a(11639),P=a(69885),S=a(490),Z=a(76749),L=a(66611),D=a(24455),G=a(22857),Q=a(97858),E=a(13246),O=a(33115),j=a(61357),z=a(57691),K=a(62146),Y=a(69984),R=a.n(Y);const J=(0,I.Z)(F,[["render",h]]),N=J;R()(F,"components",{QPage:P.Z,QItem:S.Z,QItemSection:Z.Z,QInput:L.Z,QBtn:D.Z,QIcon:G.Z,QMenu:Q.Z,QList:E.Z,QItemLabel:O.Z,QAvatar:j.Z,QChip:z.Z}),R()(F,"directives",{ClosePopup:K.Z})},66472:e=>{e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"newGame","type":"address"}],"name":"addGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newGame","type":"address"}],"name":"GameAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"removedGame","type":"address"}],"name":"GameRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"receiveETH","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"game","type":"address"}],"name":"removeGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"toggleGameIsLive","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"games","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"isGame","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}}]);